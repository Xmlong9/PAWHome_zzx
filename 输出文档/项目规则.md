# 项目规则

## 代码规范
- 使用 TypeScript，开启严格模式。
- 小程序项目使用原生框架，页面与组件目录结构统一：`json/ts/wxml/wxss`。
- 统一请求封装，错误码与异常处理一致；禁止在代码中输出敏感信息。
- 提交规范：Conventional Commits；分支策略：main/dev/feature/*。

## 接口规范
- 标准遵循 OpenAPI 3.0，统一前缀 `/api/v1`，HTTPS。
- 鉴权：`Authorization: Bearer <token>`；支持 `wx.login` + `code2Session` 与短信验证码登录。
- 错误码：`0` 成功；`4001` 参数错误；`4003` 未授权；`4004` 资源不存在；`4090` 幂等冲突；`5000` 系统错误；`600x` 业务错误。
- 分页：`page`、`pageSize`；筛选与排序参数统一命名。

## 数据库规范
- 命名使用 `snake_case`；时间字段统一：`created_at`、`updated_at`、`deleted_at`。
- 主键使用自增或雪花ID；建立必要组合索引与唯一约束；软删除采用 `deleted_at`。
- 外键约束按模块边界控制，跨服务以应用层一致性保障。

## UI规范
- 组件库：优先使用 Vant Weapp，WeUI 作为补充。
- 统一色板、字号与间距；骨架屏、空态、错误态统一模板；资源命名与切图规范。
- 页面结构与交互对齐 MasterGo 原型与 `f:\PAWHome\UI设计` 参考素材。

## 安全规范
- 输入校验与请求签名；防重放与限流；敏感数据加密存储。
- 文件上传校验类型与大小；对象存储鉴权与过期策略。
- 审计日志与风控事件记录；账号封禁与申诉流程。

## 文档规范
- 产出文档统一存放 `f:\PAWHome\输出文档`，格式参考 `f:\PAWHome\格式参考`。
- 文档包含：需求、设计、数据库、接口、UML图、部署与测试说明；统一导出 PDF。

## 测试与发布
- 单元/集成/E2E 测试覆盖率目标；Mock 环境与数据构造。
- 灰度发布与回滚策略；监控告警与日志采集；性能指标追踪。
